# ILAL è‡ªåŠ¨åŒ–åšå¸‚æœºå™¨äºº (Market Maker Bot)

## ç›®çš„

åœ¨ ILAL ä¸Šçº¿åˆæœŸï¼Œéœ€è¦è‡ªåŠ¨åŒ–åšå¸‚æœºå™¨äººæä¾›ï¼š

1. **åˆå§‹æµåŠ¨æ€§**: åœ¨å…³é”®äº¤æ˜“å¯¹ä¸­æ³¨å…¥æµåŠ¨æ€§
2. **äº¤æ˜“æ´»è·ƒåº¦**: æ¨¡æ‹ŸçœŸå®äº¤æ˜“ï¼Œæ¿€æ´»æ± å­
3. **ä»·æ ¼ç¨³å®š**: é˜²æ­¢å¤§é¢äº¤æ˜“å¯¼è‡´æç«¯æ»‘ç‚¹
4. **å†·å¯åŠ¨è§£å†³**: é¿å…"æ— æµåŠ¨æ€§ â†’ æ— äº¤æ˜“è€… â†’ æ— æµåŠ¨æ€§"çš„æ­»å¾ªç¯

## âš ï¸ åˆè§„è­¦å‘Š

- æ‰€æœ‰åšå¸‚è´¦æˆ·å¿…é¡»é€šè¿‡å®Œæ•´ KYC/ZK éªŒè¯
- ä¸å¾—ä½¿ç”¨åšå¸‚æ´»åŠ¨æ“çºµå¸‚åœºä»·æ ¼
- å¿…é¡»éµå®ˆå½“åœ°åšå¸‚å•†ç›‘ç®¡è¦æ±‚
- å»ºè®®å’¨è¯¢æ³•å¾‹é¡¾é—®

## æ¶æ„

```
market-maker/
â”œâ”€â”€ config.yaml           # åšå¸‚é…ç½®
â”œâ”€â”€ bot.ts                # ä¸»æœºå™¨äººé€»è¾‘
â”œâ”€â”€ strategies/           # ç­–ç•¥æ¨¡å—
â”‚   â”œâ”€â”€ liquidity.ts      # æµåŠ¨æ€§æä¾›
â”‚   â””â”€â”€ trade.ts          # äº¤æ˜“ç­–ç•¥
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ session.ts        # Session ç®¡ç†
â”‚   â””â”€â”€ price.ts          # ä»·æ ¼é¢„è¨€æœº
â””â”€â”€ monitoring/
    â””â”€â”€ alerts.ts         # ç›‘æ§å‘Šè­¦
```

## å¿«é€Ÿå¼€å§‹

### 1. é…ç½®

ç¼–è¾‘ `config.yaml`:

```yaml
network:
  rpc: https://mainnet.base.org
  chain_id: 8453

accounts:
  - address: "0x..."
    private_key_env: "MM_PRIVATE_KEY_1"
    session_ttl: 86400  # 24h

pools:
  - pair: "USDC/ETH"
    pool_address: "0x..."
    liquidity_usd: 50000
    rebalance_threshold: 0.05  # 5%

  - pair: "USDC/WBTC"
    pool_address: "0x..."
    liquidity_usd: 30000
    rebalance_threshold: 0.05

trading:
  enabled: true
  max_trade_usd: 1000
  frequency_minutes: 30
  slippage_tolerance: 0.005  # 0.5%

monitoring:
  telegram_bot_token: ${TELEGRAM_TOKEN}
  telegram_chat_id: ${TELEGRAM_CHAT_ID}
  alert_on_errors: true
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. è®¾ç½®ç¯å¢ƒå˜é‡

```bash
export MM_PRIVATE_KEY_1="0x..."
export TELEGRAM_TOKEN="..."
export TELEGRAM_CHAT_ID="..."
```

### 4. å¯åŠ¨æœºå™¨äºº

```bash
# ä»…æä¾›æµåŠ¨æ€§
npm run start:liquidity

# ä»…æ‰§è¡Œäº¤æ˜“
npm run start:trade

# å®Œæ•´æ¨¡å¼
npm run start
```

## ç­–ç•¥è¯´æ˜

### 1. æµåŠ¨æ€§æä¾›ç­–ç•¥

- **å…¨èŒƒå›´æµåŠ¨æ€§**: åœ¨ `-âˆ åˆ° +âˆ` çš„ä»·æ ¼èŒƒå›´æä¾›æµåŠ¨æ€§
- **é›†ä¸­æµåŠ¨æ€§**: åœ¨å½“å‰ä»·æ ¼ Â±10% èŒƒå›´æä¾›æ›´å¯†é›†çš„æµåŠ¨æ€§
- **è‡ªåŠ¨å†å¹³è¡¡**: å½“èµ„äº§æ¯”ä¾‹åç¦» Â±5% æ—¶è‡ªåŠ¨è°ƒæ•´

### 2. äº¤æ˜“ç­–ç•¥

- **éšæœºæ¼«æ­¥**: æ¨¡æ‹ŸçœŸå®äº¤æ˜“è€…è¡Œä¸ºï¼Œéšæœºä¹°å–
- **å¥—åˆ©**: å‘ç°å¹¶æ‰§è¡Œè·¨ DEX å¥—åˆ©æœºä¼š
- **ç½‘æ ¼äº¤æ˜“**: åœ¨ä»·æ ¼èŒƒå›´å†…è®¾ç½®å¤šä¸ªè®¢å•

## ç›‘æ§æŒ‡æ ‡

æœºå™¨äººä¼šå®šæœŸæŠ¥å‘Šï¼š

- âœ… æä¾›çš„æµåŠ¨æ€§æ€»é‡ (USD)
- ğŸ“Š æ¯æ—¥äº¤æ˜“é‡
- ğŸ’° æ‰‹ç»­è´¹æ”¶å…¥
- ğŸ“‰ æ— å¸¸æŸå¤±
- â±ï¸ Session çŠ¶æ€

## é£é™©ç®¡ç†

### èµ„é‡‘é™åˆ¶

- å•ä¸ªæ± å­æœ€å¤§æµåŠ¨æ€§: $50,000
- å•ç¬”äº¤æ˜“æœ€å¤§é‡‘é¢: $1,000
- æ¯å°æ—¶æœ€å¤§äº¤æ˜“æ¬¡æ•°: 10 æ¬¡

### ç´§æ€¥åœæ­¢

```bash
# åœæ­¢æ‰€æœ‰äº¤æ˜“
npm run stop

# æ’¤å‡ºæ‰€æœ‰æµåŠ¨æ€§
npm run withdraw-all
```

## ç¤ºä¾‹è¾“å‡º

```
[2026-02-10 10:00:00] ğŸš€ Market Maker Bot å¯åŠ¨
[2026-02-10 10:00:05] âœ… Session æ¿€æ´»: 0x742d...bEb1
[2026-02-10 10:00:10] ğŸ’§ æ·»åŠ æµåŠ¨æ€§: USDC/ETH $50,000
[2026-02-10 10:00:15] ğŸ’§ æ·»åŠ æµåŠ¨æ€§: USDC/WBTC $30,000
[2026-02-10 10:00:20] âœ… åˆå§‹åŒ–å®Œæˆ

[2026-02-10 10:30:00] ğŸ“ˆ æ‰§è¡Œäº¤æ˜“: ä¹°å…¥ 0.1 ETH @ $3,200
[2026-02-10 11:00:00] ğŸ“‰ æ‰§è¡Œäº¤æ˜“: å–å‡º 0.05 ETH @ $3,210
[2026-02-10 11:30:00] ğŸ“Š æ¯æ—¥æŠ¥å‘Š:
  - æä¾›æµåŠ¨æ€§: $80,000
  - ä»Šæ—¥äº¤æ˜“é‡: $12,500
  - æ‰‹ç»­è´¹æ”¶å…¥: $37.50
  - æ— å¸¸æŸå¤±: -$45.00
  - å‡€ç›ˆäº: -$7.50
```

## æ•…éšœæ’æŸ¥

### Session è¿‡æœŸ

```bash
# æ‰‹åŠ¨ç»­æœŸ Session
npm run renew-session
```

### æµåŠ¨æ€§ä¸å¹³è¡¡

```bash
# å†å¹³è¡¡æ‰€æœ‰æ± å­
npm run rebalance-all
```

### Gas ä»·æ ¼è¿‡é«˜

åœ¨ `config.yaml` ä¸­è®¾ç½® `max_gas_price_gwei`:

```yaml
gas:
  max_price_gwei: 50  # æ‹’ç»è¶…è¿‡ 50 Gwei çš„äº¤æ˜“
```

## éƒ¨ç½²å»ºè®®

### ç”Ÿäº§ç¯å¢ƒ

- ä½¿ç”¨å¤šä¸ªè´¦æˆ·åˆ†æ•£é£é™©
- åœ¨ Kubernetes ä¸­è¿è¡Œï¼Œè®¾ç½®è‡ªåŠ¨é‡å¯
- é…ç½®å®Œæ•´çš„æ—¥å¿—å’Œç›‘æ§
- å®šæœŸå®¡è®¡äº¤æ˜“è®°å½•

### å®¹å™¨åŒ–

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --production
COPY . .
CMD ["npm", "start"]
```

```bash
docker build -t ilal-mm-bot .
docker run -d --env-file .env ilal-mm-bot
```

## æ³•å¾‹å…è´£å£°æ˜

æ­¤è„šæœ¬ä»…ä¾›æŠ€æœ¯æ¼”ç¤ºï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚ä½¿ç”¨è€…éœ€è‡ªè¡Œæ‰¿æ‹…æ‰€æœ‰é£é™©ï¼Œå¹¶ç¡®ä¿éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„ã€‚
